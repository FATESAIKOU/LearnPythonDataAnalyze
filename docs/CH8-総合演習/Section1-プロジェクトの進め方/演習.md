# Section1: プロジェクトの進め方 - 演習

## 🎯 この演習の目標

ミニ分析プロセスの各ステップを実際に体験し、分析の流れを身につける。

---

## 📝 演習1: データセットを読み込んで確認しよう

tips データセットを読み込み、Step 2「データを見る」を実践しましょう。

### 課題

以下のセルを実行して、データの全体像を把握してください。

```python
# ライブラリのインポート
import pandas as pd
import seaborn as sns
import matplotlib.pyplot as plt

# 日本語フォントの設定（文字化け防止）
plt.rcParams['font.family'] = 'DejaVu Sans'

# tips データセットの読み込み
df = sns.load_dataset('tips')
```

```python
# 演習1-1: 先頭5行を表示
df.head()
```

```python
# 演習1-2: データの基本情報を確認
df.info()
```

```python
# 演習1-3: 統計量を確認
df.describe()
```

```python
# 演習1-4: データのサイズを確認
print(f"行数: {df.shape[0]}, 列数: {df.shape[1]}")
```

### 確認ポイント

上記を実行したら、以下の質問に答えてください：

1. このデータセットは何行何列ありますか？
2. 数値型の列はいくつありますか？
3. 欠損値はありますか？
4. `total_bill` の平均値はいくらですか？

<details>
<summary>💡 解答を見る</summary>

1. **244行、7列**
2. **4つ**（total_bill, tip, size と後で追加する列）
3. **欠損値はありません**（info() で Non-Null Count がすべて 244）
4. **約 $19.79**（describe() の mean を確認）

</details>

---

## 📝 演習2: 問いを立ててみよう

Step 1「問いを立てる」を実践します。

### 課題

tips データセットについて、以下の観点から「分析の問い」を考えてください。

**ヒント**: 良い問いは「〜はどうなっているか？」「〜に差はあるか？」という形式です。

| 観点 | あなたの問い |
|------|--------------|
| 曜日に関する問い | （例）曜日によってチップ額は変わるか？ |
| 時間帯に関する問い | |
| 人数に関する問い | |
| 喫煙に関する問い | |

```python
# 演習2: Markdown セルまたはコメントで問いを書いてみよう

# 私の分析の問い:
# 1. 
# 2. 
# 3. 
```

<details>
<summary>💡 問いの例を見る</summary>

- 曜日によってチップ額は変わるか？
- ランチとディナーでチップ額に差はあるか？
- 人数が多いほどチップ額は高くなるか？
- 喫煙者と非喫煙者でチップの傾向は違うか？
- 合計金額とチップ額にはどんな関係があるか？

</details>

---

## 📝 演習3: データを整えよう

Step 3「データを整える」を実践します。

### 課題3-1: 欠損値を確認する

```python
# 欠損値の確認
df.isnull().sum()
```

### 課題3-2: 新しい列を作成する

チップ率（チップ額 ÷ 合計金額 × 100）を計算して、新しい列を追加してください。

```python
# チップ率を計算して新しい列を追加
df['tip_rate'] = # ここにコードを書く

# 結果を確認
df.head()
```

<details>
<summary>💡 ヒントを見る</summary>

チップ率の計算式:
```python
df['tip_rate'] = df['tip'] / df['total_bill'] * 100
```

</details>

<details>
<summary>💡 解答を見る</summary>

```python
# チップ率を計算して新しい列を追加
df['tip_rate'] = df['tip'] / df['total_bill'] * 100

# 結果を確認
df.head()
```

実行すると、新しい `tip_rate` 列が追加されます。

</details>

---

## 📝 演習4: 集計してみよう

Step 4「集計・可視化する」の集計部分を実践します。

### 課題4-1: 曜日別の平均チップ額を計算する

```python
# 曜日別の平均チップ額
day_tip = df.groupby('day')['tip'].mean()
print(day_tip)
```

### 課題4-2: 時間帯別の平均チップ額を計算する

```python
# 時間帯別の平均チップ額
# ここにコードを書く

```

<details>
<summary>💡 ヒントを見る</summary>

`day` を `time` に変えるだけです。

</details>

<details>
<summary>💡 解答を見る</summary>

```python
# 時間帯別の平均チップ額
time_tip = df.groupby('time')['tip'].mean()
print(time_tip)
```

結果:
- Dinner: 約 $3.10
- Lunch: 約 $2.73

</details>

### 課題4-3: 曜日 × 時間帯のクロス集計

曜日と時間帯の組み合わせで平均チップ額を見てみましょう。

```python
# 曜日 × 時間帯のクロス集計
# ここにコードを書く

```

<details>
<summary>💡 ヒントを見る</summary>

`groupby()` に複数の列を指定できます:
```python
df.groupby(['day', 'time'])['tip'].mean()
```

</details>

<details>
<summary>💡 解答を見る</summary>

```python
# 曜日 × 時間帯のクロス集計
cross = df.groupby(['day', 'time'])['tip'].mean()
print(cross)
```

または `unstack()` で見やすく：

```python
cross = df.groupby(['day', 'time'])['tip'].mean().unstack()
print(cross)
```

</details>

---

## 📝 演習5: グラフで可視化しよう

Step 4「集計・可視化する」の可視化部分を実践します。

### 課題5-1: 曜日別の平均チップ額を棒グラフにする

```python
# 曜日別の平均チップ額を棒グラフで表示
day_tip = df.groupby('day')['tip'].mean()

plt.figure(figsize=(8, 5))
day_tip.plot(kind='bar', color='steelblue')
plt.title('Average Tip by Day')
plt.xlabel('Day')
plt.ylabel('Average Tip ($)')
plt.xticks(rotation=0)
plt.tight_layout()
plt.show()
```

### 課題5-2: 合計金額とチップ額の散布図を作成する

```python
# 合計金額とチップ額の散布図
plt.figure(figsize=(8, 5))
# ここにコードを書く

plt.title('Total Bill vs Tip')
plt.xlabel('Total Bill ($)')
plt.ylabel('Tip ($)')
plt.tight_layout()
plt.show()
```

<details>
<summary>💡 ヒントを見る</summary>

散布図は `plt.scatter(x, y)` を使います:
```python
plt.scatter(df['total_bill'], df['tip'])
```

</details>

<details>
<summary>💡 解答を見る</summary>

```python
# 合計金額とチップ額の散布図
plt.figure(figsize=(8, 5))
plt.scatter(df['total_bill'], df['tip'], alpha=0.6)
plt.title('Total Bill vs Tip')
plt.xlabel('Total Bill ($)')
plt.ylabel('Tip ($)')
plt.tight_layout()
plt.show()
```

</details>

---

## 📝 演習6: 結論をまとめよう

Step 5「結論をまとめる」を実践します。

### 課題

これまでの演習で発見したことを、以下のテンプレートに沿ってまとめてください。

```markdown
# ミニ分析レポート: tips データセット

## 1. 分析の目的
（あなたが設定した問いを書く）

## 2. 使用データ
- データセット: tips（seaborn 組み込み）
- レコード数: 244件

## 3. 分析結果

### 発見1: 曜日別のチップ額
（曜日別の集計結果と発見を書く）

### 発見2: 合計金額とチップの関係
（散布図から読み取れることを書く）

## 4. 考察
（結果から言えることを書く）
```

---

## ✅ 演習の完了チェック

以下の項目ができたら、このセクションの演習は完了です：

- [ ] tips データセットを読み込み、head/info/describe で確認した
- [ ] 自分で分析の問いを3つ以上考えた
- [ ] チップ率の列を追加した
- [ ] 曜日別・時間帯別の集計を行った
- [ ] 棒グラフと散布図を作成した
- [ ] 分析結果を簡単にまとめた

---

次は「応用問題」で、別のデータセットを使って同じプロセスを自分で実践します！
