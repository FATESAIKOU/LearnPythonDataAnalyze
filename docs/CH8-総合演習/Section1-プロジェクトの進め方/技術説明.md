# Section1: プロジェクトの進め方 - 技術説明

## 🎯 このセクションの目標

データ分析プロジェクトを進めるための **5ステップのミニ分析プロセス** を理解し、実践できるようになる。

---

## 📚 ミニ分析プロセスとは？

データ分析を効率的に進めるための、シンプルな5ステップの流れです。

```
┌───────────────────────────────────────────────────────────────────────────┐
│                    ミニ分析プロセス（5ステップ）                          │
├───────────────────────────────────────────────────────────────────────────┤
│                                                                           │
│   Step 1         Step 2         Step 3         Step 4         Step 5      │
│  ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐    ┌─────────┐  │
│  │  問いを │ → │データを │ → │データを │ → │ 集計・  │ → │ 結論を  │  │
│  │  立てる │    │  見る   │    │ 整える  │    │ 可視化  │    │まとめる │  │
│  └─────────┘    └─────────┘    └─────────┘    └─────────┘    └─────────┘  │
│                                                                           │
│   思考・メモ      Pandas         Pandas         Pandas +       Markdown   │
│                                                Matplotlib                 │
│                                                                           │
└───────────────────────────────────────────────────────────────────────────┘
```

---

## 📖 各ステップの詳細

### Step 1: 問いを立てる 🤔

**やること**: 「何を知りたいか？」を明確にする

データを見る前に、まず「問い」を決めます。問いがないと、分析の方向性が定まりません。

**良い問いの例**:
- 「売上が最も高い曜日はいつか？」
- 「年齢によって満足度に差はあるか？」
- 「どの商品カテゴリが一番人気か？」

**悪い問いの例**:
- 「データを分析する」（具体性がない）
- 「すべてを調べる」（範囲が広すぎる）

```python
# 💡 Jupyter でメモを残す方法
# Markdown セルに問いを書いておく

# 例：
# ## 分析の問い
# 1. チップの金額に影響する要因は何か？
# 2. 曜日によってチップ額は変わるか？
# 3. 喫煙者と非喫煙者でチップ額に差はあるか？
```

---

### Step 2: データを見る 👀

**やること**: データの全体像を把握する

分析を始める前に、データがどんな形をしているか確認します。

**確認すべきポイント**:

| 確認項目 | 使うメソッド | わかること |
|----------|--------------|------------|
| 先頭数行 | `head()` | データの形式、列名 |
| 基本情報 | `info()` | 列数、データ型、欠損値の有無 |
| 統計量 | `describe()` | 平均、最大、最小など |
| サイズ | `shape` | 行数と列数 |

```python
import pandas as pd
import seaborn as sns

# データの読み込み（seaborn の組み込みデータセット）
df = sns.load_dataset('tips')

# データを見る
print("=== 先頭5行 ===")
print(df.head())

print("\n=== 基本情報 ===")
print(df.info())

print("\n=== 統計量 ===")
print(df.describe())

print("\n=== サイズ ===")
print(f"行数: {df.shape[0]}, 列数: {df.shape[1]}")
```

---

### Step 3: データを整える 🧹

**やること**: 分析しやすい形にデータを加工する

データには欠損値や不適切な型が含まれていることがあります。分析前に整えます。

**よくある作業**:

| 作業 | 使うメソッド | 例 |
|------|--------------|-----|
| 欠損値の確認 | `isnull().sum()` | 欠損値の数を確認 |
| 欠損値の処理 | `dropna()`, `fillna()` | 削除または補完 |
| 型の変換 | `astype()` | 文字列を数値に |
| 新しい列の作成 | `df['新列'] = ...` | 計算結果を追加 |

```python
# 欠損値の確認
print("=== 欠損値の数 ===")
print(df.isnull().sum())

# 新しい列の作成（例：チップ率）
df['tip_rate'] = df['tip'] / df['total_bill'] * 100
print("\n=== チップ率を追加 ===")
print(df.head())
```

---

### Step 4: 集計・可視化する 📊

**やること**: データを集計し、グラフで傾向を発見する

問いに答えるために、データを集計してグラフで可視化します。

**よく使う集計**:

| 目的 | 使うメソッド |
|------|--------------|
| グループ別の平均 | `groupby().mean()` |
| グループ別の合計 | `groupby().sum()` |
| グループ別の個数 | `groupby().count()` |
| クロス集計 | `pd.crosstab()` |

**よく使うグラフ**:
| 目的 | グラフの種類 |
|------|--------------|
| カテゴリ別の比較 | 棒グラフ |
| 時系列の変化 | 折れ線グラフ |
| 分布の確認 | ヒストグラム |
| 2変数の関係 | 散布図 |

```python
import matplotlib.pyplot as plt

# 曜日別の平均チップ額
day_tip = df.groupby('day')['tip'].mean()
print("=== 曜日別の平均チップ額 ===")
print(day_tip)

# 棒グラフで可視化
plt.figure(figsize=(8, 5))
day_tip.plot(kind='bar', color='steelblue')
plt.title('曜日別の平均チップ額')
plt.xlabel('曜日')
plt.ylabel('平均チップ額 ($)')
plt.xticks(rotation=0)
plt.tight_layout()
plt.show()
```

---

### Step 5: 結論をまとめる 📝

**やること**: 発見した傾向と提案を文章化する

分析結果を他の人に伝えられるようにまとめます。

**まとめに含める内容**:

1. **分析の目的**: 何を知りたかったか
2. **使用したデータ**: どんなデータを使ったか
3. **分析結果**: 何がわかったか（数字とグラフ）
4. **考察・提案**: 結果から何が言えるか

```markdown
# 分析レポート：チップ額の傾向分析

## 1. 分析の目的
レストランのチップ額に影響する要因を把握し、売上向上のヒントを得る。

## 2. 使用データ
- データセット: tips（seaborn 組み込み）
- レコード数: 244件
- 期間: 不明（サンプルデータ）

## 3. 分析結果
### 曜日別の平均チップ額
- 日曜日が最も高い（$3.26）
- 木曜日が最も低い（$2.77）

### 喫煙者・非喫煙者の比較
- 喫煙者: 平均 $3.01
- 非喫煙者: 平均 $2.99
- ほぼ差なし

## 4. 考察・提案
- 週末（特に日曜日）はチップが多い傾向
- 週末のシフトを増やすことで従業員の満足度向上が期待できる
```

---

## 🔧 使用するデータセットについて

この章では **seaborn** ライブラリに組み込まれているデータセットを使用します。

### tips データセット
レストランのチップに関するデータ（244件）

| 列名 | 説明 |
|------|------|
| total_bill | 合計金額 |
| tip | チップ額 |
| sex | 性別 |
| smoker | 喫煙者かどうか |
| day | 曜日 |
| time | 時間帯（Lunch/Dinner） |
| size | 人数 |

### penguins データセット
ペンギンの観測データ（344件）

| 列名 | 説明 |
|------|------|
| species | 種類 |
| island | 島 |
| bill_length_mm | くちばしの長さ |
| bill_depth_mm | くちばしの深さ |
| flipper_length_mm | ひれの長さ |
| body_mass_g | 体重 |
| sex | 性別 |

### データセットの読み込み方法

```python
import seaborn as sns

# tips データセットを読み込む
tips = sns.load_dataset('tips')

# penguins データセットを読み込む
penguins = sns.load_dataset('penguins')
```

> 💡 **Note**: 本教材の Docker 環境（Jupyter Notebook）には、seaborn がすでにインストールされています。
> 追加のインストールは不要で、すぐにデータセットを読み込むことができます。

### 別の環境で使う場合（参考）

Docker 環境以外で学習する場合は、以下のコマンドで seaborn をインストールしてください：

```bash
pip install seaborn
```

---

## 📋 まとめ

| ステップ | やること | 使う技術 |
|----------|----------|----------|
| Step 1 | 問いを立てる | 思考・メモ |
| Step 2 | データを見る | `head()`, `info()`, `describe()` |
| Step 3 | データを整える | `isnull()`, `dropna()`, `fillna()` |
| Step 4 | 集計・可視化する | `groupby()`, Matplotlib |
| Step 5 | 結論をまとめる | Markdown |

次の演習では、この5ステップを意識しながら、分析計画を立てる練習をします。
