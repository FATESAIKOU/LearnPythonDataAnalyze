# Section3: モジュールとパッケージ

## 🎯 このセクションの目標

外部のコードを活用できるようになる

---

## 📚 学習内容

1. import 文の使い方
2. from ... import ... 構文
3. as でエイリアスを付ける
4. 標準ライブラリ（math, random, datetime）
5. pip でパッケージをインストール
6. NumPy/Pandas/Matplotlib の紹介

---

## 1. モジュールとは

### モジュール = Python ファイル

モジュールとは、関数やクラスをまとめた Python ファイル（.py）のことです。
他の人が作った便利な機能を、自分のプログラムで使うことができます。

```
┌─────────────────────────────────────────────────────────┐
│  Python のモジュール階層                                │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌─────────────────┐                                    │
│  │  標準ライブラリ │  Python に最初から入っている       │
│  │  math, random   │  インストール不要                  │
│  │  datetime, os   │                                    │
│  └─────────────────┘                                    │
│           ↓                                             │
│  ┌─────────────────┐                                    │
│  │  外部ライブラリ │  pip でインストールする            │
│  │  NumPy, Pandas  │  データ分析の定番ツール            │
│  │  Matplotlib     │                                    │
│  └─────────────────┘                                    │
│           ↓                                             │
│  ┌─────────────────┐                                    │
│  │  自作モジュール │  自分で作った .py ファイル         │
│  └─────────────────┘                                    │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

---

## 2. import 文の基本

### モジュール全体をインポート

```python
import math

# モジュール名.関数名 で使う
print(math.sqrt(16))   # 4.0（平方根）
print(math.pi)         # 3.141592653589793
```

### import の仕組み

```
┌───────────────────────────────────────────────────────┐
│  import math                                          │
└───────────────────────────────────────────────────────┘
                    │
                    ▼
┌───────────────────────────────────────────────────────┐
│  math モジュールが読み込まれる                        │
│                                                       │
│  math.sqrt()  ─── 平方根を計算                        │
│  math.pi      ─── 円周率 3.14159...                   │
│  math.floor() ─── 切り捨て                            │
│  math.ceil()  ─── 切り上げ                            │
│  ...                                                  │
└───────────────────────────────────────────────────────┘
```

---

## 3. from ... import ... 構文

### 特定の関数だけをインポート

```python
from math import sqrt, pi

# モジュール名なしで使える
print(sqrt(16))  # 4.0
print(pi)        # 3.141592653589793
```

### 全てをインポート（非推奨）

```python
from math import *

# 全ての関数が使えるが、名前の衝突に注意
print(sqrt(25))
print(floor(3.7))
```

⚠️ `import *` は名前の衝突を起こしやすいので、避けた方が良いです。

---

## 4. as でエイリアス（別名）を付ける

### モジュール名を短くする

```python
import datetime as dt

now = dt.datetime.now()
print(now)
```

### データ分析でよく使うエイリアス

```python
import numpy as np       # NumPy は np
import pandas as pd      # Pandas は pd
import matplotlib.pyplot as plt  # Matplotlib は plt
```

これらは **業界標準** のエイリアスです。
他の人のコードでも同じ略称が使われているので、覚えておきましょう。

---

## 5. 標準ライブラリ

Python に最初から入っている便利なモジュールを紹介します。

### math モジュール（数学関数）

```python
import math

# 基本的な数学関数
print(math.sqrt(16))     # 4.0（平方根）
print(math.pow(2, 10))   # 1024.0（2の10乗）
print(math.floor(3.7))   # 3（切り捨て）
print(math.ceil(3.2))    # 4（切り上げ）
print(math.pi)           # 3.141592653589793
```

### random モジュール（乱数）

```python
import random

# 0〜1 の乱数
print(random.random())

# 範囲を指定した整数の乱数
print(random.randint(1, 10))  # 1〜10 のどれか

# リストからランダムに選ぶ
fruits = ["りんご", "みかん", "バナナ"]
print(random.choice(fruits))

# リストをシャッフル
numbers = [1, 2, 3, 4, 5]
random.shuffle(numbers)
print(numbers)
```

### datetime モジュール（日付と時刻）

```python
import datetime

# 現在の日時
now = datetime.datetime.now()
print(now)  # 2024-01-15 10:30:45.123456

# 日付だけ
today = datetime.date.today()
print(today)  # 2024-01-15

# 特定の日付を作成
birthday = datetime.date(1990, 5, 15)
print(birthday)  # 1990-05-15

# 日付の計算
tomorrow = today + datetime.timedelta(days=1)
print(tomorrow)
```

### os モジュール（ファイル・ディレクトリ操作）

```python
import os

# 現在のディレクトリ
print(os.getcwd())

# ファイル一覧
print(os.listdir("."))

# ファイルの存在確認
print(os.path.exists("test.txt"))
```

---

## 6. pip でパッケージをインストール

### pip とは

pip は Python のパッケージ管理ツールです。
外部ライブラリをインストールするために使います。

### 基本的な使い方

```bash
# パッケージをインストール
pip install パッケージ名

# 例: NumPy をインストール
pip install numpy

# バージョンを指定してインストール
pip install numpy==1.24.0

# インストール済みパッケージを確認
pip list

# パッケージをアンインストール
pip uninstall パッケージ名
```

### Jupyter Notebook 内でインストール

```python
# Notebook 内で pip を使う場合
!pip install numpy
```

---

## 7. データ分析の三種の神器（プレビュー）

> 📌 **ここは軽く眺めるだけでOK！**
> 
> 次の章から詳しく学びます。今は「こんなものがあるんだ」程度で大丈夫です。

データ分析でよく使う3つのライブラリを紹介します。

```
┌─────────────────────────────────────────────────────────┐
│  データ分析の三種の神器                                 │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  ┌────────────┐   ┌────────────┐   ┌───────────────┐    │
│  │  NumPy     │   │  Pandas    │   │  Matplotlib   │    │
│  │            │   │            │   │               │    │
│  │  数値計算  │   │ 表形式     │   │ グラフ描画    │    │
│  │  配列操作  │   │ データ処理 │   │ 可視化        │    │
│  └────────────┘   └────────────┘   └───────────────┘    │
│        │               │                 │              │
│        └───────────────┼─────────────────┘              │
│                        │                                │
│                        ▼                                │
│              ┌─────────────────┐                        │
│              │  データ分析！   │                        │
│              └─────────────────┘                        │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

| ライブラリ | 役割 | 学ぶ章 |
|------------|------|--------|
| **NumPy** | 数値計算・配列操作 | CH4 |
| **Pandas** | 表形式データの処理 | CH5, CH6 |
| **Matplotlib** | グラフ描画・可視化 | CH7 |

### インポートの例（今は覚えなくてOK）

```python
import numpy as np           # NumPy は np と略す
import pandas as pd          # Pandas は pd と略す
import matplotlib.pyplot as plt  # Matplotlib は plt と略す
```

これらのエイリアス（np, pd, plt）は **業界標準** なので、次の章から使っていきます！

---

## 8. インポートのベストプラクティス

### 推奨される書き方

```python
# 標準ライブラリ
import os
import sys
import math

# サードパーティライブラリ（外部ライブラリ）
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt

# 自作モジュール
# from my_module import my_function
```

### インポートの順番

1. 標準ライブラリ
2. サードパーティライブラリ
3. 自作モジュール

各グループの間に空行を入れると読みやすくなります。

---

## 📝 まとめ

| 構文 | 説明 | 例 |
|------|------|-----|
| `import` | モジュール全体を読み込む | `import math` |
| `from ... import` | 特定の関数だけ読み込む | `from math import sqrt` |
| `as` | 別名を付ける | `import numpy as np` |
| `pip install` | パッケージをインストール | `pip install pandas` |

### 覚えておくべきエイリアス

| ライブラリ | エイリアス |
|------------|-----------|
| NumPy | `np` |
| Pandas | `pd` |
| Matplotlib | `plt` |

---

## 🚀 次のステップ

演習.md に進んで、モジュールを実際に使ってみましょう！
