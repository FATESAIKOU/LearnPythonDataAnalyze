# Section1: 関数の基本

## 🎯 このセクションの目標

自分で関数を定義して呼び出せるようになる

---

## 📚 学習内容

1. 関数とは何か（なぜ必要か）
2. def キーワードで関数を定義
3. 引数（パラメータ）の使い方
4. return で値を返す
5. ドキュメンテーション文字列（docstring）

---

## 1. 関数とは何か

### 関数 = 処理をまとめた「部品」

関数とは、複数の処理をひとまとめにして名前を付けたものです。
一度定義すれば、何度でも呼び出して使えます。

### なぜ関数が必要？

同じ処理を何度も書くのは面倒ですし、間違いの元です。

```python
# 関数を使わない場合（同じコードが繰り返される）
print("=" * 30)
print("こんにちは！")
print("=" * 30)

# ... 別の場所で同じことをしたい ...

print("=" * 30)
print("さようなら！")
print("=" * 30)
```

関数を使えば、処理を再利用できます。

```python
# 関数を使う場合
def show_message(text):
    print("=" * 30)
    print(text)
    print("=" * 30)

show_message("こんにちは！")
show_message("さようなら！")
```

**出力:**
```
==============================
こんにちは！
==============================
==============================
さようなら！
==============================
```

---

## 2. 関数の定義方法

### 基本構文

```python
def 関数名():
    処理1
    処理2
    ...
```

- `def` は「define（定義する）」の略
- 関数名の後に `()` と `:` を付ける
- 処理はインデント（字下げ）して書く

### 最もシンプルな関数

```python
def greet():
    print("こんにちは！")

# 関数を呼び出す
greet()
```

**出力:**
```
こんにちは！
```

### ⚠️ 重要: 関数は定義しただけでは動かない

```python
def say_hello():
    print("Hello!")

# ↑ これだけでは何も表示されない
# 関数を「呼び出す」必要がある

say_hello()  # ← これで初めて実行される
```

---

## 3. 引数（パラメータ）

### 引数とは？

関数に渡すデータのことです。
引数を使うと、関数の動作を変化させることができます。

### 引数を1つ受け取る関数

```python
def greet(name):
    print("こんにちは、" + name + "さん！")

greet("田中")
greet("佐藤")
```

**出力:**
```
こんにちは、田中さん！
こんにちは、佐藤さん！
```

### 引数を複数受け取る関数

```python
def introduce(name, age):
    print(name + "さん、" + str(age) + "歳です")

introduce("田中", 25)
introduce("佐藤", 30)
```

**出力:**
```
田中さん、25歳です
佐藤さん、30歳です
```

### 引数の順番に注意

引数は定義した順番で渡す必要があります。

```python
def divide(a, b):
    print(str(a) + " ÷ " + str(b) + " = " + str(a / b))

divide(10, 2)  # 10 ÷ 2 = 5.0
divide(2, 10)  # 2 ÷ 10 = 0.2（順番が変わると結果も変わる）
```

---

## 4. 戻り値（return）

### 戻り値とは？

関数が処理結果を「返す」ことです。
`return` キーワードを使います。

### 戻り値のある関数

```python
def add(a, b):
    return a + b

result = add(3, 5)
print(result)  # 8
```

### print と return の違い

```python
# print は画面に表示するだけ
def add_print(a, b):
    print(a + b)

# return は値を返す（計算結果を使える）
def add_return(a, b):
    return a + b

# 違いを確認
x = add_print(3, 5)   # 8 と表示される
print(x)              # None（戻り値がない）

y = add_return(3, 5)  # 何も表示されない
print(y)              # 8（戻り値がある）

# 戻り値があると、さらに計算できる
z = add_return(3, 5) * 2
print(z)  # 16
```

### 複数の値を返す

```python
def calc_stats(a, b):
    total = a + b
    diff = a - b
    return total, diff

sum_result, diff_result = calc_stats(10, 3)
print("合計:", sum_result)   # 合計: 13
print("差:", diff_result)    # 差: 7
```

### return で関数を終了する

`return` が実行されると、関数はそこで終了します。

```python
def check_age(age):
    if age < 0:
        return "無効な年齢です"
    if age < 20:
        return "未成年です"
    return "成人です"

print(check_age(-5))   # 無効な年齢です
print(check_age(15))   # 未成年です
print(check_age(25))   # 成人です
```

---

## 5. ドキュメンテーション文字列（docstring）

### docstring とは？

関数の説明を書くための特別なコメントです。
関数の最初に `"""` で囲んで書きます。

### 基本的な docstring

```python
def greet(name):
    """名前を受け取って挨拶を表示する関数"""
    print("こんにちは、" + name + "さん！")
```

### 詳しい docstring

```python
def calculate_bmi(weight, height):
    """
    BMI を計算する関数
    
    Args:
        weight: 体重（kg）
        height: 身長（m）
    
    Returns:
        BMI の値
    """
    return weight / (height ** 2)

# 使い方
bmi = calculate_bmi(60, 1.70)
print("BMI:", round(bmi, 1))  # BMI: 20.8
```

### docstring を確認する

```python
# help() で docstring を表示できる
help(calculate_bmi)
```

---

## 6. 実践例: 便利な関数を作る

### 例1: 消費税計算関数

```python
def calc_tax(price, tax_rate=0.10):
    """
    税込み価格を計算する
    
    Args:
        price: 税抜き価格
        tax_rate: 税率（デフォルト 10%）
    
    Returns:
        税込み価格
    """
    return int(price * (1 + tax_rate))

print(calc_tax(1000))       # 1100
print(calc_tax(1000, 0.08)) # 1080（8% の場合）
```

### 例2: 成績判定関数

```python
def get_grade(score):
    """点数から成績を判定する"""
    if score >= 90:
        return "A"
    elif score >= 80:
        return "B"
    elif score >= 70:
        return "C"
    elif score >= 60:
        return "D"
    else:
        return "F"

print(get_grade(85))  # B
print(get_grade(72))  # C
print(get_grade(45))  # F
```

### 例3: リストの統計関数

```python
def calc_average(numbers):
    """リストの平均値を計算する"""
    if len(numbers) == 0:
        return 0
    return sum(numbers) / len(numbers)

scores = [80, 75, 90, 85, 70]
avg = calc_average(scores)
print("平均:", avg)  # 平均: 80.0
```

---

## 📝 まとめ

| 概念 | 説明 | 例 |
|------|------|-----|
| 関数定義 | `def` で関数を作成 | `def greet():` |
| 引数 | 関数に渡すデータ | `def greet(name):` |
| 戻り値 | 関数が返す結果 | `return result` |
| docstring | 関数の説明文 | `"""説明"""` |

### 関数を使うメリット

1. **再利用**: 同じコードを何度も書かなくて良い
2. **可読性**: コードが読みやすくなる
3. **保守性**: 修正が1箇所で済む
4. **テスト**: 部品ごとにテストできる

---

## 🚀 次のステップ

演習.md に進んで、自分で関数を作成してみましょう！
